"""
Задача №4: Стая драконов


Условие:
У каждого дракона есть определённое количество голов, и мощь всей стаи определяется произведением голов всех драконов.
Дано общее число голов M, требуется вычислить наибольшую возможную мощь стаи.
"""

def strongest_horde(total_heads):
    """
    Вычисляет наибольшую мощь стаи драконов по заданному количеству голов.
    
    Аргументы:
        total_heads (int): Суммарное число голов
        
    Возвращает:
        int: Максимальная мощь стаи
    """
    # Наилучший результат достигается, если разбивать головы на группы по 3
    # Например, 8 = 3+3+2 (3*3*2=18) лучше, чем 2+2+2+2 (2*2*2*2=16)
    triple_count = total_heads // 3
    left = total_heads % 3
    # Если остаток 1, выгоднее заменить одну тройку на две двойки
    if left == 1 and triple_count > 0:
        triple_count -= 1
        left = 4
    # Итоговое произведение зависит от остатка
    if left == 0:
        return 3 ** triple_count
    elif left == 2:
        return (3 ** triple_count) * 2
    else:  # left == 4
        return (3 ** triple_count) * 4

# Получение входных данных
with open("INPUT.TXT", "r") as fin:
    data = fin.readline().strip()
    vals = data.split()
    if len(vals) > 1:
        heads = int(vals[1])
    else:
        heads = int(vals[0])

# Расчёт и вывод результата
answer = strongest_horde(heads)
with open("OUTPUT.TXT", "w") as fout:
    fout.write(str(answer))

"""
Пояснения:

Для максимизации произведения оптимально разбивать общее число голов на множители по 3.
Если после деления на 3 остаётся 1, выгоднее заменить одну тройку на две двойки (так как 2*2=4 > 3*1=3).
Если остаток 2 — просто добавляем одного дракона с двумя головами.

Примеры:
- M=6: 3+3 → 9
- M=7: 3+2+2 → 12
- M=8: 3+3+2 → 18
- M=9: 3+3+3 → 27
- M=10: 3+3+2+2 → 36

Время работы — константное, только арифметика.
"""
